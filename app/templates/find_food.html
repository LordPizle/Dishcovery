<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Find Food Near You</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <script>
        function getLocationAndSubmit() {
            if (!navigator.geolocation) {
                alert("Geolocation not supported");
                return;
            }

            navigator.geolocation.getCurrentPosition(function(pos) {
                document.getElementById("lat").value = pos.coords.latitude;
                document.getElementById("lng").value = pos.coords.longitude;
                document.getElementById("foodForm").submit();
            }, function() {
                alert("Could not get your location");
            });
        }
    </script>
</head>
<body>
    <h1>Find Food Near You</h1>

    <form id="foodForm" method="POST">
        <label>What are you craving?</label><br><br>
        <input type="text" name="keyword" value="{{ keyword }}" placeholder="e.g. chicken, pizza, vegan" required>

        <input type="hidden" id="lat" name="lat">
        <input type="hidden" id="lng" name="lng">

        <button type="button" onclick="getLocationAndSubmit()">Search Near Me</button>
    </form>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    {% if results %}
        <h2>Restaurants serving "{{ keyword }}" near you:</h2>
        <div class="card-container">
            {% for r in results %}
            <div class="card">

                {% if r.photo_url %}
                    <img src="{{ r.photo_url }}" alt="{{ r.name }}">
                {% else %}
                    <img src="https://via.placeholder.com/400x250?text=No+Image" alt="No image">
                {% endif %}

                <div class="card-content">
                    <h3>{{ r.name }}</h3>
                    <p>{{ r.address }}</p>
                    <p>‚≠ê {{ r.rating }}</p>
                </div>

            </div>
            {% endfor %}
        </div>
    {% endif %}

    <p><a href="/">Back to Home</a></p>
</body>
</html>
